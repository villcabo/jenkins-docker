name: jenkins-docker
agent:
  container_name: jenkins-agent1
  image: jenkins/inbound-agent:alpine
  restart: unless-stopped
  privileged: true
  user: root
  expose:
    - 22
  volumes:
    - /var/run/docker.sock:/var/run/docker.sock
  environment:
    JENKINS_URL: ${JENKINS_MASTER_URL:-http://jenkins:8080}
    JENKINS_AGENT_NAME: agent1
    JENKINS_SECRET: $(cat /run/secrets/jenkins-agent1-secret)
